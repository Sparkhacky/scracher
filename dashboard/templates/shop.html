{% extends "layout.html" %}
{% block content %}

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
  <div class="lg:col-span-2 bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
    {% if screenshots and screenshots[0]['path'] %}
      <img src="/static/{{ screenshots[0]['path'] }}" class="w-full object-cover max-h-[520px]" />
    {% else %}
      <div class="h-80 flex items-center justify-center text-slate-400">Sin captura</div>
    {% endif %}
    <div class="p-4">
      <div class="text-sm text-slate-400">{{ shop['domain'] }}</div>
      <div class="text-xl font-semibold">{{ shop['title'] or shop['url'] }}</div>
      <div class="mt-2 text-sm">
        <a class="text-emerald-400 hover:underline" href="{{ shop['url'] }}" target="_blank">{{ shop['url'] }}</a>
      </div>
      {% if shop['notes'] %}
        <div class="mt-3 text-sm text-slate-400">{{ shop['notes'] }}</div>
      {% endif %}
    </div>
  </div>

  <div class="bg-slate-900 border border-slate-800 rounded-2xl p-4">
    <div class="font-semibold mb-3">Tecnologías detectadas</div>
    <div class="space-y-2 max-h-[520px] overflow-auto pr-1">
      {% for t in tech %}
        <div class="flex items-center justify-between gap-2 border border-slate-800 rounded-xl px-3 py-2">
          <div>
            <div class="text-sm font-medium">{{ t['name'] }}</div>
            <div class="text-xs text-slate-400">{{ t['category'] }} • {{ t['source'] }}</div>
          </div>
          <div class="text-xs text-slate-400">
            {{ "%.0f"|format((t['confidence'] or 0)*100) }}%
          </div>
        </div>
      {% endfor %}
      {% if tech|length == 0 %}
        <div class="text-sm text-slate-400">No se detectaron tecnologías.</div>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}