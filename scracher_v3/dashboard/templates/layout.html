<!DOCTYPE html>
<html lang="es" class="dark">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SCRACHER v3</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background:#0a0e1a; color:#e2e8f0; font-family:'JetBrains Mono',monospace,'Segoe UI',sans-serif; }
  .risk-critical { background:#7f1d1d;color:#fca5a5;border-color:#991b1b; }
  .risk-high     { background:#78350f;color:#fcd34d;border-color:#92400e; }
  .risk-medium   { background:#713f12;color:#fde68a;border-color:#854d0e; }
  .risk-low      { background:#14532d;color:#86efac;border-color:#166534; }
  .risk-clean    { background:#1e293b;color:#94a3b8;border-color:#334155; }
  .risk-unknown  { background:#1e293b;color:#64748b;border-color:#334155; }
  .badge { font-size:.65rem;font-weight:700;padding:2px 7px;border-radius:4px;border-width:1px;border-style:solid; }
  .nav-link { padding:.4rem .9rem;border-radius:.5rem;font-size:.8rem;font-weight:600;letter-spacing:.04em;transition:background .15s; }
  .nav-link:hover { background:#1e293b; }
  .nav-link.active { background:#0e7490;color:#fff; }
  .stat-box { background:#0f172a;border:1px solid #1e293b;border-radius:.75rem;padding:.75rem 1.25rem; }
  .btn { display:inline-flex;align-items:center;gap:.4rem;padding:.45rem 1rem;border-radius:.5rem;font-size:.8rem;font-weight:600;cursor:pointer;transition:all .15s; }
  .btn-cyan  { background:#0e7490;color:#fff; } .btn-cyan:hover  { background:#0891b2; }
  .btn-red   { background:#991b1b;color:#fff; } .btn-red:hover   { background:#b91c1c; }
  .btn-green { background:#166534;color:#fff; } .btn-green:hover { background:#15803d; }
  .btn-gray  { background:#1e293b;color:#94a3b8; } .btn-gray:hover { background:#334155; }
  .card { background:#0f172a;border:1px solid #1e293b;border-radius:1rem;overflow:hidden;transition:border-color .15s; }
  .card:hover { border-color:#334155; }
  input,select,textarea { background:#0f172a;border:1px solid #1e293b;border-radius:.5rem;padding:.45rem .75rem;color:#e2e8f0;outline:none;font-size:.85rem; }
  input:focus,select:focus,textarea:focus { border-color:#0e7490; }
  table { width:100%;border-collapse:collapse;font-size:.82rem; }
  th { color:#64748b;font-weight:600;text-align:left;padding:.5rem .75rem;border-bottom:1px solid #1e293b;text-transform:uppercase;font-size:.72rem;letter-spacing:.05em; }
  td { padding:.5rem .75rem;border-bottom:1px solid #0f172a;vertical-align:middle; }
  tr:hover td { background:#0f172a; }
  ::-webkit-scrollbar { width:6px; } ::-webkit-scrollbar-thumb { background:#334155;border-radius:3px; }
</style>
</head>
<body>

<!-- NAV -->
<nav style="background:#060b14;border-bottom:1px solid #1e293b;" class="sticky top-0 z-50">
  <div class="max-w-screen-xl mx-auto px-4 flex items-center gap-1 h-12">
    <a href="/" class="text-cyan-400 font-black text-sm mr-4 tracking-widest">SCRACHER<span class="text-slate-500">v3</span></a>
    <a href="/"          class="nav-link {% if request.url.path=='/' %}active{% endif %}">Sitios</a>
    <a href="/scan"      class="nav-link {% if request.url.path=='/scan' %}active{% endif %}">
      ⚡ Escanear
      <span id="nav-scan-badge" class="hidden ml-1 w-2 h-2 rounded-full bg-cyan-400 inline-block animate-pulse"></span>
    </a>
    <a href="/wallets"   class="nav-link {% if request.url.path=='/wallets' %}active{% endif %}">₿ Wallets</a>
    <a href="/discovered"class="nav-link {% if request.url.path=='/discovered' %}active{% endif %}">Links</a>
    <a href="/manage"    class="nav-link {% if request.url.path=='/manage' %}active{% endif %}">DB</a>
    <a href="/export"    class="nav-link {% if request.url.path=='/export' %}active{% endif %}">Exportar</a>
    <div class="ml-auto flex items-center gap-3 text-xs text-slate-500">
      <span>sitios: <span class="text-white font-bold">{{ stats.total }}</span></span>
      <span class="text-red-400">crit: <b>{{ stats.critical }}</b></span>
      <span class="text-yellow-400">high: <b>{{ stats.high }}</b></span>
      <span class="text-yellow-600">wallets: <b>{{ stats.wallets_total }}</b></span>
    </div>
  </div>
</nav>

<div class="max-w-screen-xl mx-auto px-4 py-6">
  {% block content %}{% endblock %}
</div>

<script>
// Mostrar badge animado si hay escaneo en curso
async function checkScanStatus(){
  try{
    const r = await fetch('/api/scan/status');
    const d = await r.json();
    document.getElementById('nav-scan-badge').classList.toggle('hidden', !d.running);
  }catch(e){}
}
setInterval(checkScanStatus, 3000);
checkScanStatus();
</script>
</body>
</html>
